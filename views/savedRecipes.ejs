<!DOCTYPE html>
<!-- 
Group 1-1 
Members:  McKay Boody, Nick Dizes, Lindsey Gordon, Mo Galbraith
Program Description:
This website application is for Diabetics to find good recipes that help with their symptoms, and it
provides users the ability to create an account so that they can log in and save recipes to use later.
-->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>[Template] Sample Inner Page</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Amatic+SC:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />

    <!-- =======================================================
  * Template Name: Yummy
  * Updated: Sep 18 2023 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/yummy-bootstrap-restaurant-website-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="container d-flex align-items-center justify-content-between">
        <a
          href="index.html"
          class="logo d-flex align-items-center me-auto me-lg-0"
        >
          <h1>
            Smart Plate
            <span>.</span>
          </h1>
        </a>

        <nav id="navbar" class="navbar">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="recipes.ejs">All Recipes</a></li>
            <li><a href="savedRecipes.ejs">Saved Recipes</a></li>
            <li><a href="pages-about.html">About</a></li>

            <li><a href="pages-contact.html">Contact</a></li>
        

            <% if (loggedInPersonID) { %>
              <!-- Display "My Account" link only if the user is logged in -->
              <li><a href="pages-myaccount.html">My Account</a></li>
            <% } %>
          </ul>
        </nav>


          </ul>
        </nav>
        <!-- .navbar -->
        <% if (loggedInPersonID) { %>
          <!-- Display "Logout" link only if the user is logged in -->
          <a class="btn-login" href="/logout">Logout</a>
          <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
          <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
        <% } else { %>
          <a class="btn-login" href="pages-login.html">Login</a>
          <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
          <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>
        <% } %>

      </div>
    </header>
    <!-- End Header -->

    <main id="main">
      <!-- ======= Breadcrumbs ======= -->
      <div class="breadcrumbs">
        <div class="container">
          <div class="d-flex justify-content-between align-items-center">
            <h2>Saved Recipes</h2>
            <!-- <ol>
              <li><a href="index.html">Home</a></li>
              <li>Sample Inner Page</li>
            </ol> -->
          </div>
        </div>
      </div>
      <!-- End Breadcrumbs -->
      <!-- ======= Menu Section ======= -->
      <% if (data.length > 0) { %>

<!-- Add a search input field -->
<div class="container mt-4 mb-4">
  <input
    type="text"
    id="recipeSearchInput"
    class="form-control"
    placeholder="Search by Recipe Title"
  />
</div>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const recipeSearchInput = document.getElementById('recipeSearchInput');

    recipeSearchInput.addEventListener('input', function () {
      const searchTerm = recipeSearchInput.value.toLowerCase();

      // Hide or show recipes based on the search term
      const rows = document.querySelectorAll('tbody tr');
      rows.forEach(function (row) {
        const title = row.querySelector('td:first-child').innerText.toLowerCase();

        if (title.includes(searchTerm)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    });
  });
</script>



      <section
        style="display: flex; justify-content: center; align-items: center"
      >
        <div class="row">
          <div class="col-lg-12">
            <div class="card" style="border: none">
              <div class="card-body">

<!-- ... (your existing code) ... -->

<!-- Table with stripped rows -->
<div class="table-responsive">
  <table style="width: 70%; margin-bottom: 0; margin: 0 auto">
    <thead>
      <tr>
        <th style="border: 1px solid #dddddd; text-align: left; padding: 8px; width: 20%;">Title</th>
        <th style="border: 1px solid #dddddd; text-align: left; padding: 8px; width: 40%;">Instructions</th>
        <th style="border: 1px solid #dddddd; text-align: left; padding: 8px; width: 20%;">Ingredients</th>
        <th style="border: 1px solid #dddddd; text-align: left; padding: 8px; width: 10%;">Edit</th>
        <th style="border: 1px solid #dddddd; text-align: left; padding: 8px; width: 10%;">Delete</th>
      </tr>
    </thead>
    <!-- ejs inserts -->
    <tbody>
      <% data.forEach(item => { %>
        <tr>
          <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">
            <span id="title<%= item.RecipeID %>"><%= item.Title %></span>
            <input type="text" id="editTitle<%= item.RecipeID %>" style="display: none;" value="<%= item.Title %>" />
          </td>
          <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">
            <span id="instructions<%= item.RecipeID %>">
              <%- item.Instructions.replace(/\n/g, `<br />`) %>
            </span>
            <textarea id="editInstructions<%= item.RecipeID %>" style="display: none;"><%- item.Instructions %></textarea>
          </td>
          <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">
            <span id="ingredients<%= item.RecipeID %>">
              <%- item.Ingredients.replace(/\n/g, `<br />`) %>
            </span>
            <textarea id="editIngredients<%= item.RecipeID %>" style="display: none;"><%- item.Ingredients %></textarea>
          </td>
          <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">
            <button onclick="editRecipe('<%= item.RecipeID %>')">Edit</button>
            <form id="editForm<%= item.RecipeID %>" action="/editSavedRecipe" method="post" style="display: none;">
              <input type="hidden" name="recipeID" value="<%= item.RecipeID %>" />
              <button type="submit" class="btn btn-success">Save</button>
              <button type="button" onclick="cancelEdit('<%= item.RecipeID %>')" class="btn btn-secondary">Cancel</button>
            </form>
          </td>
          <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">
            <form action="/deleteSavedRecipe" method="post">
              <input type="hidden" name="recipeID" value="<%= item.RecipeID %>" />
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>
<!-- End Table with stripped rows -->

<script>
  function editRecipe(recipeID) {
    // Hide original content
    document.getElementById(`title${recipeID}`).style.display = 'none';
    document.getElementById(`instructions${recipeID}`).style.display = 'none';
    document.getElementById(`ingredients${recipeID}`).style.display = 'none';

    // Show edit input fields
    document.getElementById(`editTitle${recipeID}`).style.display = 'block';
    document.getElementById(`editInstructions${recipeID}`).style.display = 'block';
    document.getElementById(`editIngredients${recipeID}`).style.display = 'block';

    // Set initial values of edit input fields
    document.getElementById(`editTitle${recipeID}`).value = document.getElementById(`title${recipeID}`).textContent.trim();
    document.getElementById(`editInstructions${recipeID}`).value = document.getElementById(`instructions${recipeID}`).textContent.trim();
    document.getElementById(`editIngredients${recipeID}`).value = document.getElementById(`ingredients${recipeID}`).textContent.trim();

    // Show edit form and hide edit button
    document.getElementById(`editForm${recipeID}`).style.display = 'block';
    event.target.style.display = 'none';

    // Hide delete button
    document.querySelector(`button[onclick="deleteRecipe('${recipeID}')"]`).style.display = 'none';
  }

  function cancelEdit(recipeID) {
    // Show original content
    document.getElementById(`title${recipeID}`).style.display = 'inline';
    document.getElementById(`instructions${recipeID}`).style.display = 'inline';
    document.getElementById(`ingredients${recipeID}`).style.display = 'inline';

    // Hide edit input fields
    document.getElementById(`editTitle${recipeID}`).style.display = 'none';
    document.getElementById(`editInstructions${recipeID}`).style.display = 'none';
    document.getElementById(`editIngredients${recipeID}`).style.display = 'none';

    // Hide edit form and show edit button
    document.getElementById(`editForm${recipeID}`).style.display = 'none';
    document.querySelector(`button[onclick="editRecipe('${recipeID}')"]`).style.display = 'inline';

    // Show delete button
    document.querySelector(`button[onclick="deleteRecipe('${recipeID}')"]`).style.display = 'inline';
  }

  function deleteRecipe(recipeID) {
    // You can add confirmation logic here if needed
    document.querySelector(`form[action="/deleteSavedRecipe"] input[name="recipeID"]`).value = recipeID;
  }
</script>

<!-- ... (your existing code) ... -->









                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- <section class="section">
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table datatable custom-table">
                    <thead>
                      <tr>
                        <th>Title</th>
                        <th>Instructions</th>
                        <th>Ingredients</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% data.forEach(item => { %>
                      <tr>
                        <td><%= item.Title %></td>
                        <td>
                          <%- item.Instructions.replace(/\n/g, `
                          <br />
                          `) %>
                        </td>
                        <td><%= item.Ingredients %></td>
                      </tr>
                      <% }); %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section> -->
      <% } else if (loggedInPersonID > 0) { %>
      <div
        style="
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
          height: 100vh;
        "
      >
        <h2 style="margin-bottom: 20px">
          You have no saved recipes.
          <br />
          <br />
          Click
          <a href="/recipes.ejs">here</a>
          to view and save new recipes
        </h2>
      </div>
      <% } else { %>
      <div
        style="
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
          height: 100vh;
        "
      >
        <h2 style="margin-bottom: 20px">
          There are no saved recipes because you are not logged in.
          <br />
          <br />
          Click
          <a href="/pages-login.html">here</a>
          to Login
        </h2>
      </div>
      <% } %>

      <!-- End Menu Section -->
      <!-- <section class="sample-page">
      <div class="container" data-aos="fade-up">

        <p>
          You can duplicate this sample page and create any number of inner pages you like!
        </p>

      </div>
    </section> -->
    </main>
    <!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
      <div class="container">
        <div class="row gy-3">
          <div class="col-lg-3 col-md-6 d-flex">
            <i class="bi bi-geo-alt icon"></i>
            <div>
              <h4>Address</h4>
              <p>
                Brigham Young University
                <br />
                Provo, UT 84606
                <br />
              </p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links d-flex">
            <i class="bi bi-telephone icon"></i>
            <div>
              <h4>Office Contacts</h4>
              <p>
                <strong>Phone:</strong>
                +1 801 244 4224
                <br />
                <strong>Email:</strong>
                info@SmartPlate.com
                <br />
              </p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links d-flex">
            <i class="bi bi-clock icon"></i>
            <div>
              <h4>Office Hours</h4>
              <p>
                <strong>Mon-Sat:</strong>
                8AM - 5PM
                <br />
                Sunday: Closed
              </p>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Follow Us</h4>
            <div class="social-links d-flex">
              <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
              <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
              <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
              <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="copyright">
          &copy; Copyright
          <strong><span>Smart Plate Co.</span></strong>
          All Rights Reserved
        </div>
        <!-- <div class="credits"> -->
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/yummy-bootstrap-restaurant-website-template/ -->
        <!-- Designed by
            <a href="https://bootstrapmade.com/">BootstrapMade</a> -->
      </div>
    </footer>
    <!-- End Footer -->

    <a
      href="#"
      class="scroll-top d-flex align-items-center justify-content-center"
    >
      <i class="bi bi-arrow-up-short"></i>
    </a>

    <div id="preloader"></div>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
